---
import Link from '@components/Link.astro'
import Section from '@components/Section.astro'
import Separator from '@components/Separator.astro'
import Main from '@layouts/Main.astro'
import { META, SEPARATOR } from '@utils/data'
import { getCollection } from 'astro:content'

const notes = (await getCollection('notes')) ?? []

const title = 'Notes'
---

<Main fullTitle={title + META.ogTitle} title={title} url="/notes">
  <Section
    class:list={[
      'prose w-full max-w-none prose-headings:font-bold',
      'prose-headings:text-gray-700 dark:prose-headings:text-gray-200',
    ]}>
    <h1 class="mb-0 pb-2 text-5xl lg:mb-0 lg:pb-2">Notes üìù</h1>
    <h2>2023</h2>
    {
      notes.length > 0 && (
        <ul class="ml-0 list-outside list-none pl-0">
          {(notes ?? []).map((note) => (
            <li>
              <h3>
                <Link
                  title={note.data.title}
                  analyticsClick={`notes-${note.slug}`}
                  href={`/notes/${note.slug}`}>
                  {note.data.title}
                </Link>
              </h3>

              <p class=" text-gray-500 dark:text-gray-400">
                <span>{new Date(note.data.date).toLocaleDateString()}</span>
                {note.data.description && (
                  <>
                    {' '}
                    {SEPARATOR} {note.data.description}
                  </>
                )}
              </p>
            </li>
          ))}
        </ul>
      )
    }
    <Separator />
    <p class="text-center">A bit empty here... for now. üòâ</p>
  </Section>
</Main>
